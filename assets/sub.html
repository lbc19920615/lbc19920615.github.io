<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sub</title>
    <style>
        html {
            height: 100%;
        }

        body {
            height: 100%;
            margin: 0;
        }

        #routerroot {
            overflow: auto;
        }

        #nav {
            position: sticky;
            top: 0;
        }
    </style>
    <link rel="stylesheet" href="/assets/uno.css" />
<link rel="stylesheet" href="/assets/webelef/webele_22059d1e.css" />
<link rel="stylesheet" href="/assets/webelef/app_e7319ea1.css" />
        <script type="importmap">
        {
          "imports": {"vue":"https://cdnjs.cloudflare.com/ajax/libs/vue/3.3.4/vue.esm-browser.min.js","wlepre":"/assets/wle-provider/index.js?v=0.0.3","wle":"/assets/webelef/main_esm_a63b6b22.js?v=1692839195806"}
        }
    </script>
        <script type="module">


            let name = location.hash.slice(2);
            window.self = window.parent;
            globalThis.VueDemi = self.VueDemi;
            // import { createStyleSheet } from '/assets/wle-router.js?v=0.1.0';


            let curPageCtx = null;
            let curParams = null;

            window.addEventListener("message",function (e) {
                if (e.origin === location.origin) {
                    let data = e.data;
                    if (data.type === "__page-params") {
                        curParams = data.data;
                        // console.log('curPageCtx', curPageCtx);
                    }
                }
            })


            import('/assets/wle-router.js?v=0.1.0').then(m => {
                m.createStyleSheet(name);

                self.wRoute.loadSubPage({
                    nid: 'sub', routerName: name,
                    reRender(innerEle) {
                        document.getElementById('routerroot').appendChild(innerEle)
                    },
                    onEnd(pageCtx) {
                        curPageCtx =  pageCtx;
                        if (curPageCtx?.lifeTimes?.onReady) {
                            curPageCtx.lifeTimes.onReady()
                        }
                        // console.log(self.__conditionMap__);
                        // console.log('routerName load end', curPageCtx, curParams);
                    }
                });
            });





        // console.log(globalThis, window, self);

        </script>
</head>

<body>
    <div id="routerroot" class="h-full"></div>
</body>

</html>