(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d2c4396"],{"02f4":function(e,t,n){var r=n("4588"),a=n("be13");e.exports=function(e){return function(t,n){var o,i,s=String(a(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(o=s.charCodeAt(c),o<55296||o>56319||c+1===u||(i=s.charCodeAt(c+1))<56320||i>57343?e?s.charAt(c):o:e?s.slice(c,c+2):i-56320+(o-55296<<10)+65536)}}},"0bfb":function(e,t,n){"use strict";var r=n("cb7c");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},1169:function(e,t,n){var r=n("2d95");e.exports=Array.isArray||function(e){return"Array"==r(e)}},"11e9":function(e,t,n){var r=n("52a7"),a=n("4630"),o=n("6821"),i=n("6a99"),s=n("69a8"),c=n("c69a"),u=Object.getOwnPropertyDescriptor;t.f=n("9e1e")?u:function(e,t){if(e=o(e),t=i(t,!0),c)try{return u(e,t)}catch(n){}if(s(e,t))return a(!r.f.call(e,t),e[t])}},"14b9":function(e,t,n){var r=n("5ca1");r(r.P,"String",{repeat:n("9744")})},"1c4c":function(e,t,n){"use strict";var r=n("9b43"),a=n("5ca1"),o=n("4bf8"),i=n("1fa8"),s=n("33a4"),c=n("9def"),u=n("f1ae"),l=n("27ee");a(a.S+a.F*!n("5cc5")((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,a,h,d=o(e),p="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,v=void 0!==m,g=0,y=l(d);if(v&&(m=r(m,f>2?arguments[2]:void 0,2)),void 0==y||p==Array&&s(y))for(t=c(d.length),n=new p(t);t>g;g++)u(n,g,v?m(d[g],g):d[g]);else for(h=y.call(d),n=new p;!(a=h.next()).done;g++)u(n,g,v?i(h,m,[a.value,g],!0):a.value);return n.length=g,n}})},"1fa8":function(e,t,n){var r=n("cb7c");e.exports=function(e,t,n,a){try{return a?t(r(n)[0],n[1]):t(n)}catch(i){var o=e["return"];throw void 0!==o&&r(o.call(e)),i}}},"23c6":function(e,t,n){var r=n("2d95"),a=n("2b4c")("toStringTag"),o="Arguments"==r(function(){return arguments}()),i=function(e,t){try{return e[t]}catch(n){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=i(t=Object(e),a))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},2621:function(e,t){t.f=Object.getOwnPropertySymbols},"27ee":function(e,t,n){var r=n("23c6"),a=n("2b4c")("iterator"),o=n("84f2");e.exports=n("8378").getIteratorMethod=function(e){if(void 0!=e)return e[a]||e["@@iterator"]||o[r(e)]}},"33a4":function(e,t,n){var r=n("84f2"),a=n("2b4c")("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[a]===e)}},"37c8":function(e,t,n){t.f=n("2b4c")},3846:function(e,t,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"3a72":function(e,t,n){var r=n("7726"),a=n("8378"),o=n("2d00"),i=n("37c8"),s=n("86cc").f;e.exports=function(e){var t=a.Symbol||(a.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:i.f(e)})}},"452d":function(e,t,n){},"456d":function(e,t,n){var r=n("4bf8"),a=n("0d58");n("5eda")("keys",(function(){return function(e){return a(r(e))}}))},5093:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"DemoLine1",(function(){return c})),n.d(r,"DemoMeshPhongMaterial",(function(){return u})),n.d(r,"DemoGltf1",(function(){return z}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-threejs"},[n("el-button",{staticStyle:{"--grd-btn-width":"90px","--grd-btn-height":"30px"},attrs:{type:"grd",size:"small"},on:{click:function(t){e.openDialog1=!0}}},[e._v("打开dialog1")]),n("simple-dialog",{attrs:{open:e.openDialog1},on:{closed:function(t){e.openDialog1=!1}}},[n("div",{staticStyle:{width:"600px",height:"300px"}},[e._v("sdsds")])]),n("div",e._l(e.ThreejsDemosKeys,(function(t){return n("el-button",{staticStyle:{"--grd-btn-width":"90px","--grd-btn-height":"30px"},attrs:{size:"small"},on:{click:function(n){return e.switchCanvas(t)}}},[e._v(e._s(t))])})),1),e.resetCanvas?n("canvas",{ref:"canvas",staticClass:"canvas"}):e._e()],1)},o=[],i=(n("7f7f"),n("ac6a"),n("456d"),n("5a89"));function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.canvas,r=[1024,768],a=new e.Scene,o=new e.PerspectiveCamera(75,r[0]/r[1],.1,1e3),i=new e.WebGLRenderer({alpha:!0,canvas:n});return i.setSize(r[0],r[1]),{scene:a,camera:o,renderer:i}}function c(e,t){var n=s(e,{canvas:t.$refs.canvas}),r=n.scene,a=n.camera,o=n.renderer;a.position.set(0,0,100),a.lookAt(0,0,0);var i=new e.LineBasicMaterial({color:255}),c=[];c.push(new e.Vector3(-10,0,0)),c.push(new e.Vector3(0,10,0)),c.push(new e.Vector3(10,0,0));var u=(new e.BufferGeometry).setFromPoints(c),l=new e.Line(u,i);r.add(l),o.render(r,a),console.log(l)}function u(e,t){var n=s(e,{canvas:t.$refs.canvas}),r=n.scene,a=n.camera,o=n.renderer,i=new e.SpotLight(16777215);function c(){var t=new e.MeshPhongMaterial({color:new e.Color("rgb(35,35,213)"),emissive:new e.Color("rgb(64,128,255)"),specular:new e.Color("rgb(93,195,255)"),shininess:1,wireframe:!0,transparent:1,opacity:.15,vertexColors:!0});return t}i.position.set(100,100,100),i.castShadow=!0,i.shadow.mapSize.width=1024,i.shadow.mapSize.height=1024,r.add(i);var u=new e.SphereGeometry(50,20,20,0,2*Math.PI,0,Math.PI),l=new e.Mesh(u,c());function h(){requestAnimationFrame(h),l.rotation.y+=.01,o.render(r,a)}r.add(l),a.position.z=90,h()}n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54");var l=n("3835"),h=n("6b75");function d(e){if(Array.isArray(e))return Object(h["a"])(e)}function p(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}var f=n("06c5");function m(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e){return d(e)||p(e)||Object(f["a"])(e)||m()}n("14b9");var g=n("d4ec"),y=n("bee2"),b=function(e,t){void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new i["Vector3"],this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:i["MOUSE"].ROTATE,MIDDLE:i["MOUSE"].DOLLY,RIGHT:i["MOUSE"].PAN},this.touches={ONE:i["TOUCH"].ROTATE,TWO:i["TOUCH"].DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return l.phi},this.getAzimuthalAngle=function(){return l.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),c=s.NONE},this.update=function(){var t=new i["Vector3"],a=(new i["Quaternion"]).setFromUnitVectors(e.up,new i["Vector3"](0,1,0)),o=a.clone().inverse(),m=new i["Vector3"],v=new i["Quaternion"],g=2*Math.PI;return function(){var e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(a),l.setFromVector3(t),n.autoRotate&&c===s.NONE&&M(R()),n.enableDamping?(l.theta+=h.theta*n.dampingFactor,l.phi+=h.phi*n.dampingFactor):(l.theta+=h.theta,l.phi+=h.phi);var i=n.minAzimuthAngle,y=n.maxAzimuthAngle;return isFinite(i)&&isFinite(y)&&(i<-Math.PI?i+=g:i>Math.PI&&(i-=g),y<-Math.PI?y+=g:y>Math.PI&&(y-=g),l.theta=i<y?Math.max(i,Math.min(y,l.theta)):l.theta>(i+y)/2?Math.max(i,l.theta):Math.min(y,l.theta)),l.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,l.phi)),l.makeSafe(),l.radius*=d,l.radius=Math.max(n.minDistance,Math.min(n.maxDistance,l.radius)),!0===n.enableDamping?n.target.addScaledVector(p,n.dampingFactor):n.target.add(p),t.setFromSpherical(l),t.applyQuaternion(o),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(h.theta*=1-n.dampingFactor,h.phi*=1-n.dampingFactor,p.multiplyScalar(1-n.dampingFactor)):(h.set(0,0,0),p.set(0,0,0)),d=1,!!(f||m.distanceToSquared(n.object.position)>u||8*(1-v.dot(n.object.quaternion))>u)&&(n.dispatchEvent(r),m.copy(n.object.position),v.copy(n.object.quaternion),f=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",le,!1),n.domElement.removeEventListener("pointerdown",$,!1),n.domElement.removeEventListener("wheel",oe,!1),n.domElement.removeEventListener("touchstart",se,!1),n.domElement.removeEventListener("touchend",ue,!1),n.domElement.removeEventListener("touchmove",ce,!1),n.domElement.ownerDocument.removeEventListener("pointermove",ee,!1),n.domElement.ownerDocument.removeEventListener("pointerup",te,!1),n.domElement.removeEventListener("keydown",ie,!1)};var n=this,r={type:"change"},a={type:"start"},o={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},c=s.NONE,u=1e-6,l=new i["Spherical"],h=new i["Spherical"],d=1,p=new i["Vector3"],f=!1,m=new i["Vector2"],v=new i["Vector2"],g=new i["Vector2"],y=new i["Vector2"],b=new i["Vector2"],T=new i["Vector2"],E=new i["Vector2"],w=new i["Vector2"],S=new i["Vector2"];function R(){return 2*Math.PI/60/60*n.autoRotateSpeed}function A(){return Math.pow(.95,n.zoomSpeed)}function M(e){h.theta-=e}function x(e){h.phi-=e}var L=function(){var e=new i["Vector3"];return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),p.add(e)}}(),O=function(){var e=new i["Vector3"];return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),p.add(e)}}(),_=function(){var e=new i["Vector3"];return function(t,r){var a=n.domElement;if(n.object.isPerspectiveCamera){var o=n.object.position;e.copy(o).sub(n.target);var i=e.length();i*=Math.tan(n.object.fov/2*Math.PI/180),L(2*t*i/a.clientHeight,n.object.matrix),O(2*r*i/a.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(L(t*(n.object.right-n.object.left)/n.object.zoom/a.clientWidth,n.object.matrix),O(r*(n.object.top-n.object.bottom)/n.object.zoom/a.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function P(e){n.object.isPerspectiveCamera?d/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function k(e){n.object.isPerspectiveCamera?d*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function C(e){m.set(e.clientX,e.clientY)}function I(e){E.set(e.clientX,e.clientY)}function N(e){y.set(e.clientX,e.clientY)}function D(e){v.set(e.clientX,e.clientY),g.subVectors(v,m).multiplyScalar(n.rotateSpeed);var t=n.domElement;M(2*Math.PI*g.x/t.clientHeight),x(2*Math.PI*g.y/t.clientHeight),m.copy(v),n.update()}function F(e){w.set(e.clientX,e.clientY),S.subVectors(w,E),S.y>0?P(A()):S.y<0&&k(A()),E.copy(w),n.update()}function U(e){b.set(e.clientX,e.clientY),T.subVectors(b,y).multiplyScalar(n.panSpeed),_(T.x,T.y),y.copy(b),n.update()}function j(){}function H(e){e.deltaY<0?k(A()):e.deltaY>0&&P(A()),n.update()}function G(e){var t=!1;switch(e.keyCode){case n.keys.UP:_(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:_(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:_(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:_(-n.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),n.update())}function B(e){if(1==e.touches.length)m.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);m.set(t,n)}}function V(e){if(1==e.touches.length)y.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);y.set(t,n)}}function z(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);E.set(0,r)}function K(e){n.enableZoom&&z(e),n.enablePan&&V(e)}function X(e){n.enableZoom&&z(e),n.enableRotate&&B(e)}function Y(e){if(1==e.touches.length)v.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),r=.5*(e.touches[0].pageY+e.touches[1].pageY);v.set(t,r)}g.subVectors(v,m).multiplyScalar(n.rotateSpeed);var a=n.domElement;M(2*Math.PI*g.x/a.clientHeight),x(2*Math.PI*g.y/a.clientHeight),m.copy(v)}function W(e){if(1==e.touches.length)b.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),r=.5*(e.touches[0].pageY+e.touches[1].pageY);b.set(t,r)}T.subVectors(b,y).multiplyScalar(n.panSpeed),_(T.x,T.y),y.copy(b)}function q(e){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+r*r);w.set(0,a),S.set(0,Math.pow(w.y/E.y,n.zoomSpeed)),P(S.y),E.copy(w)}function Z(e){n.enableZoom&&q(e),n.enablePan&&W(e)}function J(e){n.enableZoom&&q(e),n.enableRotate&&Y(e)}function Q(){}function $(e){if(!1!==n.enabled)switch(e.pointerType){case"mouse":case"pen":ne(e);break}}function ee(e){if(!1!==n.enabled)switch(e.pointerType){case"mouse":case"pen":re(e);break}}function te(e){if(!1!==n.enabled)switch(e.pointerType){case"mouse":case"pen":ae(e);break}}function ne(e){var t;switch(e.preventDefault(),n.domElement.focus?n.domElement.focus():window.focus(),e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case i["MOUSE"].DOLLY:if(!1===n.enableZoom)return;I(e),c=s.DOLLY;break;case i["MOUSE"].ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;N(e),c=s.PAN}else{if(!1===n.enableRotate)return;C(e),c=s.ROTATE}break;case i["MOUSE"].PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;C(e),c=s.ROTATE}else{if(!1===n.enablePan)return;N(e),c=s.PAN}break;default:c=s.NONE}c!==s.NONE&&(n.domElement.ownerDocument.addEventListener("pointermove",ee,!1),n.domElement.ownerDocument.addEventListener("pointerup",te,!1),n.dispatchEvent(a))}function re(e){if(!1!==n.enabled)switch(e.preventDefault(),c){case s.ROTATE:if(!1===n.enableRotate)return;D(e);break;case s.DOLLY:if(!1===n.enableZoom)return;F(e);break;case s.PAN:if(!1===n.enablePan)return;U(e);break}}function ae(e){!1!==n.enabled&&(j(e),n.domElement.ownerDocument.removeEventListener("pointermove",ee,!1),n.domElement.ownerDocument.removeEventListener("pointerup",te,!1),n.dispatchEvent(o),c=s.NONE)}function oe(e){!1===n.enabled||!1===n.enableZoom||c!==s.NONE&&c!==s.ROTATE||(e.preventDefault(),e.stopPropagation(),n.dispatchEvent(a),H(e),n.dispatchEvent(o))}function ie(e){!1!==n.enabled&&!1!==n.enableKeys&&!1!==n.enablePan&&G(e)}function se(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(n.touches.ONE){case i["TOUCH"].ROTATE:if(!1===n.enableRotate)return;B(e),c=s.TOUCH_ROTATE;break;case i["TOUCH"].PAN:if(!1===n.enablePan)return;V(e),c=s.TOUCH_PAN;break;default:c=s.NONE}break;case 2:switch(n.touches.TWO){case i["TOUCH"].DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;K(e),c=s.TOUCH_DOLLY_PAN;break;case i["TOUCH"].DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;X(e),c=s.TOUCH_DOLLY_ROTATE;break;default:c=s.NONE}break;default:c=s.NONE}c!==s.NONE&&n.dispatchEvent(a)}}function ce(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),c){case s.TOUCH_ROTATE:if(!1===n.enableRotate)return;Y(e),n.update();break;case s.TOUCH_PAN:if(!1===n.enablePan)return;W(e),n.update();break;case s.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;Z(e),n.update();break;case s.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;J(e),n.update();break;default:c=s.NONE}}function ue(e){!1!==n.enabled&&(Q(e),n.dispatchEvent(o),c=s.NONE)}function le(e){!1!==n.enabled&&e.preventDefault()}n.domElement.addEventListener("contextmenu",le,!1),n.domElement.addEventListener("pointerdown",$,!1),n.domElement.addEventListener("wheel",oe,!1),n.domElement.addEventListener("touchstart",se,!1),n.domElement.addEventListener("touchend",ue,!1),n.domElement.addEventListener("touchmove",ce,!1),n.domElement.addEventListener("keydown",ie,!1),-1===n.domElement.tabIndex&&(n.domElement.tabIndex=0),this.update()};b.prototype=Object.create(i["EventDispatcher"].prototype),b.prototype.constructor=b;var T=function(e,t){b.call(this,e,t),this.screenSpacePanning=!1,this.mouseButtons.LEFT=i["MOUSE"].PAN,this.mouseButtons.RIGHT=i["MOUSE"].ROTATE,this.touches.ONE=i["TOUCH"].PAN,this.touches.TWO=i["TOUCH"].DOLLY_ROTATE};T.prototype=Object.create(i["EventDispatcher"].prototype),T.prototype.constructor=T;var E=function(){function e(e){i["Loader"].call(this,e),this.dracoLoader=null,this.ddsLoader=null,this.ktx2Loader=null,this.pluginCallbacks=[],this.register((function(e){return new s(e)})),this.register((function(e){return new u(e)})),this.register((function(e){return new c(e)})),this.register((function(e){return new a(e)}))}function t(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}e.prototype=Object.assign(Object.create(i["Loader"].prototype),{constructor:e,load:function(e,t,n,r){var a,o=this;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:i["LoaderUtils"].extractUrlBase(e),this.manager.itemStart(e);var s=function(t){r?r(t):console.error(t),o.manager.itemError(e),o.manager.itemEnd(e)},c=new i["FileLoader"](this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,(function(n){try{o.parse(n,a,(function(n){t(n),o.manager.itemEnd(e)}),s)}catch(r){s(r)}}),n,s)},setDRACOLoader:function(e){return this.dracoLoader=e,this},setDDSLoader:function(e){return this.ddsLoader=e,this},setKTX2Loader:function(e){return this.ktx2Loader=e,this},register:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this},unregister:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this},parse:function(e,t,a,s){var c,u={},h={};if("string"===typeof e)c=e;else{var d=i["LoaderUtils"].decodeText(new Uint8Array(e,0,4));if(d===l){try{u[n.KHR_BINARY_GLTF]=new p(e)}catch(R){return void(s&&s(R))}c=u[n.KHR_BINARY_GLTF].content}else c=i["LoaderUtils"].decodeText(new Uint8Array(e))}var v=JSON.parse(c);if(void 0===v.asset||v.asset.version[0]<2)s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var b=new F(v,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager,ktx2Loader:this.ktx2Loader});b.fileLoader.setRequestHeader(this.requestHeader);for(var T=0;T<this.pluginCallbacks.length;T++){var E=this.pluginCallbacks[T](b);h[E.name]=E,u[E.name]=!0}if(v.extensionsUsed)for(T=0;T<v.extensionsUsed.length;++T){var w=v.extensionsUsed[T],S=v.extensionsRequired||[];switch(w){case n.KHR_MATERIALS_UNLIT:u[w]=new o;break;case n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:u[w]=new g;break;case n.KHR_DRACO_MESH_COMPRESSION:u[w]=new f(v,this.dracoLoader);break;case n.MSFT_TEXTURE_DDS:u[w]=new r(this.ddsLoader);break;case n.KHR_TEXTURE_TRANSFORM:u[w]=new m;break;case n.KHR_MESH_QUANTIZATION:u[w]=new y;break;default:S.indexOf(w)>=0&&void 0===h[w]&&console.warn('THREE.GLTFLoader: Unknown extension "'+w+'".')}}b.setExtensions(u),b.setPlugins(h),b.parse(a,s)}}});var n={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function r(e){if(!e)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=n.MSFT_TEXTURE_DDS,this.ddsLoader=e}function a(e){this.parser=e,this.name=n.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}function o(){this.name=n.KHR_MATERIALS_UNLIT}function s(e){this.parser=e,this.name=n.KHR_MATERIALS_CLEARCOAT}function c(e){this.parser=e,this.name=n.KHR_MATERIALS_TRANSMISSION}function u(e){this.parser=e,this.name=n.KHR_TEXTURE_BASISU}a.prototype._markDefs=function(){for(var e=this.parser,t=this.parser.json.nodes||[],n=0,r=t.length;n<r;n++){var a=t[n];a.extensions&&a.extensions[this.name]&&void 0!==a.extensions[this.name].light&&e._addNodeRef(this.cache,a.extensions[this.name].light)}},a.prototype._loadLight=function(e){var t=this.parser,n="light:"+e,r=t.cache.get(n);if(r)return r;var a,o=t.json,s=o.extensions&&o.extensions[this.name]||{},c=s.lights||[],u=c[e],l=new i["Color"](16777215);void 0!==u.color&&l.fromArray(u.color);var h=void 0!==u.range?u.range:0;switch(u.type){case"directional":a=new i["DirectionalLight"](l),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new i["PointLight"](l),a.distance=h;break;case"spot":a=new i["SpotLight"](l),a.distance=h,u.spot=u.spot||{},u.spot.innerConeAngle=void 0!==u.spot.innerConeAngle?u.spot.innerConeAngle:0,u.spot.outerConeAngle=void 0!==u.spot.outerConeAngle?u.spot.outerConeAngle:Math.PI/4,a.angle=u.spot.outerConeAngle,a.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+u.type+'".')}return a.position.set(0,0,0),a.decay=2,void 0!==u.intensity&&(a.intensity=u.intensity),a.name=t.createUniqueName(u.name||"light_"+e),r=Promise.resolve(a),t.cache.add(n,r),r},a.prototype.createNodeAttachment=function(e){var t=this,n=this.parser,r=n.json,a=r.nodes[e],o=a.extensions&&a.extensions[this.name]||{},i=o.light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))},o.prototype.getMaterialType=function(){return i["MeshBasicMaterial"]},o.prototype.extendParams=function(e,t,n){var r=[];e.color=new i["Color"](1,1,1),e.opacity=1;var a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){var o=a.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==a.baseColorTexture&&r.push(n.assignTexture(e,"map",a.baseColorTexture))}return Promise.all(r)},s.prototype.getMaterialType=function(e){var t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?i["MeshPhysicalMaterial"]:null},s.prototype.extendMaterialParams=function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var a=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&a.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&a.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(a.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){var s=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new i["Vector2"](s,s)}return Promise.all(a)},c.prototype.getMaterialType=function(e){var t=this.parser,n=t.json.materials[e];return n.extensions&&n.extensions[this.name]?i["MeshPhysicalMaterial"]:null},c.prototype.extendMaterialParams=function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var a=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&a.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(a)},u.prototype.loadTexture=function(e){var t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;var a=r.extensions[this.name],o=n.images[a.source],i=t.options.ktx2Loader;if(!i)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return t.loadTextureImage(e,o,i)};var l="glTF",h=12,d={JSON:1313821514,BIN:5130562};function p(e){this.name=n.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,h);if(this.header={magic:i["LoaderUtils"].decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==l)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");var r=new DataView(e,h),a=0;while(a<r.byteLength){var o=r.getUint32(a,!0);a+=4;var s=r.getUint32(a,!0);if(a+=4,s===d.JSON){var c=new Uint8Array(e,h+a,o);this.content=i["LoaderUtils"].decodeText(c)}else if(s===d.BIN){var u=h+a;this.body=e.slice(u,u+o)}a+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function f(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=n.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}function m(){this.name=n.KHR_TEXTURE_TRANSFORM}function v(e){i["MeshStandardMaterial"].call(this),this.isGLTFSpecularGlossinessMaterial=!0;var t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),a=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),s={specular:{value:(new i["Color"]).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=s,this.onBeforeCompile=function(e){for(var i in s)e.uniforms[i]=s[i];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",a).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return s.specular.value},set:function(e){s.specular.value=e}},specularMap:{get:function(){return s.specularMap.value},set:function(e){s.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return s.glossiness.value},set:function(e){s.glossiness.value=e}},glossinessMap:{get:function(){return s.glossinessMap.value},set:function(e){s.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}function g(){return{name:n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return v},extendParams:function(e,t,n){var r=t.extensions[this.name];e.color=new i["Color"](1,1,1),e.opacity=1;var a=[];if(Array.isArray(r.diffuseFactor)){var o=r.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(void 0!==r.diffuseTexture&&a.push(n.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new i["Color"](0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new i["Color"](1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var s=r.specularGlossinessTexture;a.push(n.assignTexture(e,"glossinessMap",s)),a.push(n.assignTexture(e,"specularMap",s))}return Promise.all(a)},createMaterial:function(e){var t=new v(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=i["TangentSpaceNormalMap"],e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}}function y(){this.name=n.KHR_MESH_QUANTIZATION}function b(e,t,n,r){i["Interpolant"].call(this,e,t,n,r)}f.prototype.decodePrimitive=function(e,t){var n=this.json,r=this.dracoLoader,a=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,i={},s={},c={};for(var u in o){var l=A[u]||u.toLowerCase();i[l]=o[u]}for(u in e.attributes){l=A[u]||u.toLowerCase();if(void 0!==o[u]){var h=n.accessors[e.attributes[u]],d=E[h.componentType];c[l]=d,s[l]=!0===h.normalized}}return t.getDependency("bufferView",a).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(var n in e.attributes){var r=e.attributes[n],a=s[n];void 0!==a&&(r.normalized=a)}t(e)}),i,c)}))}))},m.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},v.prototype=Object.create(i["MeshStandardMaterial"].prototype),v.prototype.constructor=v,v.prototype.copy=function(e){return i["MeshStandardMaterial"].prototype.copy.call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},b.prototype=Object.create(i["Interpolant"].prototype),b.prototype.constructor=b,b.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,a=e*r*3+r,o=0;o!==r;o++)t[o]=n[a+o];return t},b.prototype.beforeStart_=b.prototype.copySampleValue_,b.prototype.afterEnd_=b.prototype.copySampleValue_,b.prototype.interpolate_=function(e,t,n,r){for(var a=this.resultBuffer,o=this.sampleValues,i=this.valueSize,s=2*i,c=3*i,u=r-t,l=(n-t)/u,h=l*l,d=h*l,p=e*c,f=p-c,m=-2*d+3*h,v=d-h,g=1-m,y=v-h+l,b=0;b!==i;b++){var T=o[f+b+i],E=o[f+b+s]*u,w=o[p+b+i],S=o[p+b]*u;a[b]=g*T+y*E+m*w+v*S}return a};var T={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},E={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},w={9728:i["NearestFilter"],9729:i["LinearFilter"],9984:i["NearestMipmapNearestFilter"],9985:i["LinearMipmapNearestFilter"],9986:i["NearestMipmapLinearFilter"],9987:i["LinearMipmapLinearFilter"]},S={33071:i["ClampToEdgeWrapping"],33648:i["MirroredRepeatWrapping"],10497:i["RepeatWrapping"]},R={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},A={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},M={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},x={CUBICSPLINE:void 0,LINEAR:i["InterpolateLinear"],STEP:i["InterpolateDiscrete"]},L={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function O(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function _(e){return void 0===e["DefaultMaterial"]&&(e["DefaultMaterial"]=new i["MeshStandardMaterial"]({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:i["FrontSide"]})),e["DefaultMaterial"]}function P(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function k(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function C(e,t,n){for(var r=!1,a=!1,o=0,i=t.length;o<i;o++){var s=t[o];if(void 0!==s.POSITION&&(r=!0),void 0!==s.NORMAL&&(a=!0),r&&a)break}if(!r&&!a)return Promise.resolve(e);var c=[],u=[];for(o=0,i=t.length;o<i;o++){s=t[o];if(r){var l=void 0!==s.POSITION?n.getDependency("accessor",s.POSITION):e.attributes.position;c.push(l)}if(a){l=void 0!==s.NORMAL?n.getDependency("accessor",s.NORMAL):e.attributes.normal;u.push(l)}}return Promise.all([Promise.all(c),Promise.all(u)]).then((function(t){var n=t[0],o=t[1];return r&&(e.morphAttributes.position=n),a&&(e.morphAttributes.normal=o),e.morphTargetsRelative=!0,e}))}function I(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var a=t.extras.targetNames;if(e.morphTargetInfluences.length===a.length){e.morphTargetDictionary={};for(n=0,r=a.length;n<r;n++)e.morphTargetDictionary[a[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function N(e){var t,r=e.extensions&&e.extensions[n.KHR_DRACO_MESH_COMPRESSION];return t=r?"draco:"+r.bufferView+":"+r.indices+":"+D(r.attributes):e.indices+":"+D(e.attributes)+":"+e.mode,t}function D(e){for(var t="",n=Object.keys(e).sort(),r=0,a=n.length;r<a;r++)t+=n[r]+":"+e[n[r]]+";";return t}function F(e,n){this.json=e||{},this.extensions={},this.plugins={},this.options=n||{},this.cache=new t,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.nodeNamesUsed={},"undefined"!==typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new i["ImageBitmapLoader"](this.options.manager):this.textureLoader=new i["TextureLoader"](this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new i["FileLoader"](this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function U(e,t,n){var r=t.attributes,a=new i["Box3"];if(void 0!==r.POSITION){var o=n.json.accessors[r.POSITION],s=o.min,c=o.max;if(void 0!==s&&void 0!==c){a.set(new i["Vector3"](s[0],s[1],s[2]),new i["Vector3"](c[0],c[1],c[2]));var u=t.targets;if(void 0!==u){for(var l=new i["Vector3"],h=new i["Vector3"],d=0,p=u.length;d<p;d++){var f=u[d];if(void 0!==f.POSITION){o=n.json.accessors[f.POSITION],s=o.min,c=o.max;void 0!==s&&void 0!==c?(h.setX(Math.max(Math.abs(s[0]),Math.abs(c[0]))),h.setY(Math.max(Math.abs(s[1]),Math.abs(c[1]))),h.setZ(Math.max(Math.abs(s[2]),Math.abs(c[2]))),l.max(h)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}a.expandByVector(l)}e.boundingBox=a;var m=new i["Sphere"];a.getCenter(m.center),m.radius=a.min.distanceTo(a.max)/2,e.boundingSphere=m}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}function j(e,t,n){var r=t.attributes,a=[];function o(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(var i in r){var s=A[i]||i.toLowerCase();s in e.attributes||a.push(o(r[i],s))}if(void 0!==t.indices&&!e.index){var c=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));a.push(c)}return k(e,t),U(e,t,n),Promise.all(a).then((function(){return void 0!==t.targets?C(e,t.targets,n):e}))}function H(e,t){var n=e.getIndex();if(null===n){var r=[],a=e.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var o=0;o<a.count;o++)r.push(o);e.setIndex(r),n=e.getIndex()}var s=n.count-2,c=[];if(t===i["TriangleFanDrawMode"])for(o=1;o<=s;o++)c.push(n.getX(0)),c.push(n.getX(o)),c.push(n.getX(o+1));else for(o=0;o<s;o++)o%2===0?(c.push(n.getX(o)),c.push(n.getX(o+1)),c.push(n.getX(o+2))):(c.push(n.getX(o+2)),c.push(n.getX(o+1)),c.push(n.getX(o)));c.length/3!==s&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var u=e.clone();return u.setIndex(c),u}return F.prototype.setExtensions=function(e){this.extensions=e},F.prototype.setPlugins=function(e){this.plugins=e},F.prototype.parse=function(e,t){var n=this,r=this.json,a=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then((function(t){var o={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};P(a,o,r),k(o,r),e(o)})).catch(t)},F.prototype._markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r=0,a=t.length;r<a;r++)for(var o=t[r].joints,i=0,s=o.length;i<s;i++)e[o[i]].isBone=!0;for(var c=0,u=e.length;c<u;c++){var l=e[c];void 0!==l.mesh&&(this._addNodeRef(this.meshCache,l.mesh),void 0!==l.skin&&(n[l.mesh].isSkinnedMesh=!0)),void 0!==l.camera&&this._addNodeRef(this.cameraCache,l.camera)}},F.prototype._addNodeRef=function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)},F.prototype._getNodeRef=function(e,t,n){if(e.refs[t]<=1)return n;var r=n.clone();return r.name+="_instance_"+e.uses[t]++,r},F.prototype._invokeOne=function(e){var t=Object.values(this.plugins);t.push(this);for(var n=0;n<t.length;n++){var r=e(t[n]);if(r)return r}},F.prototype._invokeAll=function(e){var t=Object.values(this.plugins);t.unshift(this);for(var n=[],r=0;r<t.length;r++){var a=e(t[r]);a&&n.push(a)}return n},F.prototype.getDependency=function(e,t){var n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r},F.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t},F.prototype.loadBuffer=function(e){var t=this.json.buffers[e],r=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[n.KHR_BINARY_GLTF].body);var a=this.options;return new Promise((function(e,n){r.load(O(t.uri,a.path),e,void 0,(function(){n(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))},F.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))},F.prototype.loadAccessor=function(e){var t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);var a=[];return void 0!==r.bufferView?a.push(this.getDependency("bufferView",r.bufferView)):a.push(null),void 0!==r.sparse&&(a.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(a).then((function(e){var a,o,s=e[0],c=R[r.type],u=E[r.componentType],l=u.BYTES_PER_ELEMENT,h=l*c,d=r.byteOffset||0,p=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,f=!0===r.normalized;if(p&&p!==h){var m=Math.floor(d/p),v="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+m+":"+r.count,g=t.cache.get(v);g||(a=new u(s,m*p,r.count*p/l),g=new i["InterleavedBuffer"](a,p/l),t.cache.add(v,g)),o=new i["InterleavedBufferAttribute"](g,c,d%p/l,f)}else a=null===s?new u(r.count*c):new u(s,d,r.count*c),o=new i["BufferAttribute"](a,c,f);if(void 0!==r.sparse){var y=R.SCALAR,b=E[r.sparse.indices.componentType],T=r.sparse.indices.byteOffset||0,w=r.sparse.values.byteOffset||0,S=new b(e[1],T,r.sparse.count*y),A=new u(e[2],w,r.sparse.count*c);null!==s&&(o=new i["BufferAttribute"](o.array.slice(),o.itemSize,o.normalized));for(var M=0,x=S.length;M<x;M++){var L=S[M];if(o.setX(L,A[M*c]),c>=2&&o.setY(L,A[M*c+1]),c>=3&&o.setZ(L,A[M*c+2]),c>=4&&o.setW(L,A[M*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return o}))},F.prototype.loadTexture=function(e){var t,r,a=this,o=this.json,i=this.options,s=o.textures[e],c=s.extensions||{};return t=c[n.MSFT_TEXTURE_DDS]?o.images[c[n.MSFT_TEXTURE_DDS].source]:o.images[s.source],t.uri&&(r=i.manager.getHandler(t.uri)),r||(r=c[n.MSFT_TEXTURE_DDS]?a.extensions[n.MSFT_TEXTURE_DDS].ddsLoader:this.textureLoader),this.loadTextureImage(e,t,r)},F.prototype.loadTextureImage=function(e,t,n){var r=this,a=this.json,o=this.options,s=a.textures[e],c=self.URL||self.webkitURL,u=t.uri,l=!1,h=!0;return"image/jpeg"===t.mimeType&&(h=!1),void 0!==t.bufferView&&(u=r.getDependency("bufferView",t.bufferView).then((function(e){if("image/png"===t.mimeType){var n=new DataView(e,25,1).getUint8(0,!1);h=6===n||4===n||3===n}l=!0;var r=new Blob([e],{type:t.mimeType});return u=c.createObjectURL(r),u}))),Promise.resolve(u).then((function(e){return new Promise((function(t,r){var a=t;!0===n.isImageBitmapLoader&&(a=function(e){t(new i["CanvasTexture"](e))}),n.load(O(e,o.path),a,void 0,r)}))})).then((function(t){!0===l&&c.revokeObjectURL(u),t.flipY=!1,s.name&&(t.name=s.name),h||(t.format=i["RGBFormat"]);var n=a.samplers||{},o=n[s.sampler]||{};return t.magFilter=w[o.magFilter]||i["LinearFilter"],t.minFilter=w[o.minFilter]||i["LinearMipmapLinearFilter"],t.wrapS=S[o.wrapS]||i["RepeatWrapping"],t.wrapT=S[o.wrapT]||i["RepeatWrapping"],r.associations.set(t,{type:"textures",index:e}),t}))},F.prototype.assignTexture=function(e,t,r){var a=this;return this.getDependency("texture",r.index).then((function(o){if(void 0===r.texCoord||0==r.texCoord||"aoMap"===t&&1==r.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+t+" not yet supported."),a.extensions[n.KHR_TEXTURE_TRANSFORM]){var i=void 0!==r.extensions?r.extensions[n.KHR_TEXTURE_TRANSFORM]:void 0;if(i){var s=a.associations.get(o);o=a.extensions[n.KHR_TEXTURE_TRANSFORM].extendTexture(o,i),a.associations.set(o,s)}}e[t]=o}))},F.prototype.assignFinalMaterial=function(e){var t=e.geometry,n=e.material,r=void 0!==t.attributes.tangent,a=void 0!==t.attributes.color,o=void 0===t.attributes.normal,s=!0===e.isSkinnedMesh,c=Object.keys(t.morphAttributes).length>0,u=c&&void 0!==t.morphAttributes.normal;if(e.isPoints){var l="PointsMaterial:"+n.uuid,h=this.cache.get(l);h||(h=new i["PointsMaterial"],i["Material"].prototype.copy.call(h,n),h.color.copy(n.color),h.map=n.map,h.sizeAttenuation=!1,this.cache.add(l,h)),n=h}else if(e.isLine){l="LineBasicMaterial:"+n.uuid;var d=this.cache.get(l);d||(d=new i["LineBasicMaterial"],i["Material"].prototype.copy.call(d,n),d.color.copy(n.color),this.cache.add(l,d)),n=d}if(r||a||o||s||c){l="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(l+="specular-glossiness:"),s&&(l+="skinning:"),r&&(l+="vertex-tangents:"),a&&(l+="vertex-colors:"),o&&(l+="flat-shading:"),c&&(l+="morph-targets:"),u&&(l+="morph-normals:");var p=this.cache.get(l);p||(p=n.clone(),s&&(p.skinning=!0),r&&(p.vertexTangents=!0),a&&(p.vertexColors=!0),o&&(p.flatShading=!0),c&&(p.morphTargets=!0),u&&(p.morphNormals=!0),this.cache.add(l,p),this.associations.set(p,this.associations.get(n))),n=p}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),n.normalScale&&!r&&(n.normalScale.y=-n.normalScale.y),n.clearcoatNormalScale&&!r&&(n.clearcoatNormalScale.y=-n.clearcoatNormalScale.y),e.material=n},F.prototype.getMaterialType=function(){return i["MeshStandardMaterial"]},F.prototype.loadMaterial=function(e){var t,r=this,a=this.json,o=this.extensions,s=a.materials[e],c={},u=s.extensions||{},l=[];if(u[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var h=o[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=h.getMaterialType(),l.push(h.extendParams(c,s,r))}else if(u[n.KHR_MATERIALS_UNLIT]){var d=o[n.KHR_MATERIALS_UNLIT];t=d.getMaterialType(),l.push(d.extendParams(c,s,r))}else{var p=s.pbrMetallicRoughness||{};if(c.color=new i["Color"](1,1,1),c.opacity=1,Array.isArray(p.baseColorFactor)){var f=p.baseColorFactor;c.color.fromArray(f),c.opacity=f[3]}void 0!==p.baseColorTexture&&l.push(r.assignTexture(c,"map",p.baseColorTexture)),c.metalness=void 0!==p.metallicFactor?p.metallicFactor:1,c.roughness=void 0!==p.roughnessFactor?p.roughnessFactor:1,void 0!==p.metallicRoughnessTexture&&(l.push(r.assignTexture(c,"metalnessMap",p.metallicRoughnessTexture)),l.push(r.assignTexture(c,"roughnessMap",p.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),l.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,c)}))))}!0===s.doubleSided&&(c.side=i["DoubleSide"]);var m=s.alphaMode||L.OPAQUE;return m===L.BLEND?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,m===L.MASK&&(c.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&t!==i["MeshBasicMaterial"]&&(l.push(r.assignTexture(c,"normalMap",s.normalTexture)),c.normalScale=new i["Vector2"](1,1),void 0!==s.normalTexture.scale&&c.normalScale.set(s.normalTexture.scale,s.normalTexture.scale)),void 0!==s.occlusionTexture&&t!==i["MeshBasicMaterial"]&&(l.push(r.assignTexture(c,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(c.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&t!==i["MeshBasicMaterial"]&&(c.emissive=(new i["Color"]).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&t!==i["MeshBasicMaterial"]&&l.push(r.assignTexture(c,"emissiveMap",s.emissiveTexture)),Promise.all(l).then((function(){var a;return a=t===v?o[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(c):new t(c),s.name&&(a.name=s.name),a.map&&(a.map.encoding=i["sRGBEncoding"]),a.emissiveMap&&(a.emissiveMap.encoding=i["sRGBEncoding"]),k(a,s),r.associations.set(a,{type:"materials",index:e}),s.extensions&&P(o,a,s),a}))},F.prototype.createUniqueName=function(e){for(var t=i["PropertyBinding"].sanitizeNodeName(e||""),n=1;this.nodeNamesUsed[t];++n)t=e+"_"+n;return this.nodeNamesUsed[t]=!0,t},F.prototype.loadGeometries=function(e){var t=this,r=this.extensions,a=this.primitiveCache;function o(e){return r[n.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return j(n,e,t)}))}for(var s=[],c=0,u=e.length;c<u;c++){var l,h=e[c],d=N(h),p=a[d];if(p)s.push(p.promise);else l=h.extensions&&h.extensions[n.KHR_DRACO_MESH_COMPRESSION]?o(h):j(new i["BufferGeometry"],h,t),a[d]={primitive:h,promise:l},s.push(l)}return Promise.all(s)},F.prototype.loadMesh=function(e){for(var t=this,n=this.json,r=n.meshes[e],a=r.primitives,o=[],s=0,c=a.length;s<c;s++){var u=void 0===a[s].material?_(this.cache):this.getDependency("material",a[s].material);o.push(u)}return o.push(t.loadGeometries(a)),Promise.all(o).then((function(n){for(var o=n.slice(0,n.length-1),s=n[n.length-1],c=[],u=0,l=s.length;u<l;u++){var h,d=s[u],p=a[u],f=o[u];if(p.mode===T.TRIANGLES||p.mode===T.TRIANGLE_STRIP||p.mode===T.TRIANGLE_FAN||void 0===p.mode)h=!0===r.isSkinnedMesh?new i["SkinnedMesh"](d,f):new i["Mesh"](d,f),!0!==h.isSkinnedMesh||h.geometry.attributes.skinWeight.normalized||h.normalizeSkinWeights(),p.mode===T.TRIANGLE_STRIP?h.geometry=H(h.geometry,i["TriangleStripDrawMode"]):p.mode===T.TRIANGLE_FAN&&(h.geometry=H(h.geometry,i["TriangleFanDrawMode"]));else if(p.mode===T.LINES)h=new i["LineSegments"](d,f);else if(p.mode===T.LINE_STRIP)h=new i["Line"](d,f);else if(p.mode===T.LINE_LOOP)h=new i["LineLoop"](d,f);else{if(p.mode!==T.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+p.mode);h=new i["Points"](d,f)}Object.keys(h.geometry.morphAttributes).length>0&&I(h,r),h.name=t.createUniqueName(r.name||"mesh_"+e),s.length>1&&(h.name+="_"+u),k(h,r),t.assignFinalMaterial(h),c.push(h)}if(1===c.length)return c[0];var m=new i["Group"];for(u=0,l=c.length;u<l;u++)m.add(c[u]);return m}))},F.prototype.loadCamera=function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new i["PerspectiveCamera"](i["MathUtils"].radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new i["OrthographicCamera"](-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),k(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},F.prototype.loadSkin=function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))},F.prototype.loadAnimation=function(e){for(var t=this.json,n=t.animations[e],r=[],a=[],o=[],s=[],c=[],u=0,l=n.channels.length;u<l;u++){var h=n.channels[u],d=n.samplers[h.sampler],p=h.target,f=void 0!==p.node?p.node:p.id,m=void 0!==n.parameters?n.parameters[d.input]:d.input,v=void 0!==n.parameters?n.parameters[d.output]:d.output;r.push(this.getDependency("node",f)),a.push(this.getDependency("accessor",m)),o.push(this.getDependency("accessor",v)),s.push(d),c.push(p)}return Promise.all([Promise.all(r),Promise.all(a),Promise.all(o),Promise.all(s),Promise.all(c)]).then((function(t){for(var r=t[0],a=t[1],o=t[2],s=t[3],c=t[4],u=[],l=0,h=r.length;l<h;l++){var d=r[l],p=a[l],f=o[l],m=s[l],v=c[l];if(void 0!==d){var g;switch(d.updateMatrix(),d.matrixAutoUpdate=!0,M[v.path]){case M.weights:g=i["NumberKeyframeTrack"];break;case M.rotation:g=i["QuaternionKeyframeTrack"];break;case M.position:case M.scale:default:g=i["VectorKeyframeTrack"];break}var y=d.name?d.name:d.uuid,T=void 0!==m.interpolation?x[m.interpolation]:i["InterpolateLinear"],E=[];M[v.path]===M.weights?d.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&E.push(e.name?e.name:e.uuid)})):E.push(y);var w=f.array;if(f.normalized){var S;if(w.constructor===Int8Array)S=1/127;else if(w.constructor===Uint8Array)S=1/255;else if(w.constructor==Int16Array)S=1/32767;else{if(w.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");S=1/65535}for(var R=new Float32Array(w.length),A=0,L=w.length;A<L;A++)R[A]=w[A]*S;w=R}for(A=0,L=E.length;A<L;A++){var O=new g(E[A]+"."+M[v.path],p.array,w,T);"CUBICSPLINE"===m.interpolation&&(O.createInterpolant=function(e){return new b(this.times,this.values,this.getValueSize()/3,e)},O.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),u.push(O)}}}var _=n.name?n.name:"animation_"+e;return new i["AnimationClip"](_,void 0,u)}))},F.prototype.loadNode=function(e){var t=this.json,n=this.extensions,r=this,a=t.nodes[e],o=a.name?r.createUniqueName(a.name):"";return function(){var t=[];return void 0!==a.mesh&&t.push(r.getDependency("mesh",a.mesh).then((function(e){var t=r._getNodeRef(r.meshCache,a.mesh,e);return void 0!==a.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=a.weights.length;t<n;t++)e.morphTargetInfluences[t]=a.weights[t]})),t}))),void 0!==a.camera&&t.push(r.getDependency("camera",a.camera).then((function(e){return r._getNodeRef(r.cameraCache,a.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){var s;if(s=!0===a.isBone?new i["Bone"]:t.length>1?new i["Group"]:1===t.length?t[0]:new i["Object3D"],s!==t[0])for(var c=0,u=t.length;c<u;c++)s.add(t[c]);if(a.name&&(s.userData.name=a.name,s.name=o),k(s,a),a.extensions&&P(n,s,a),void 0!==a.matrix){var l=new i["Matrix4"];l.fromArray(a.matrix),s.applyMatrix4(l)}else void 0!==a.translation&&s.position.fromArray(a.translation),void 0!==a.rotation&&s.quaternion.fromArray(a.rotation),void 0!==a.scale&&s.scale.fromArray(a.scale);return r.associations.set(s,{type:"nodes",index:e}),s}))},F.prototype.loadScene=function(){function e(t,n,r,a){var o=r.nodes[t];return a.getDependency("node",t).then((function(e){return void 0===o.skin?e:a.getDependency("skin",o.skin).then((function(e){t=e;for(var n=[],r=0,o=t.joints.length;r<o;r++)n.push(a.getDependency("node",t.joints[r]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(e.isMesh){for(var r=[],a=[],o=0,s=n.length;o<s;o++){var c=n[o];if(c){r.push(c);var u=new i["Matrix4"];void 0!==t.inverseBindMatrices&&u.fromArray(t.inverseBindMatrices.array,16*o),a.push(u)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[o])}e.bind(new i["Skeleton"](r,a),e.matrixWorld)}})),e}));var t})).then((function(t){n.add(t);var i=[];if(o.children)for(var s=o.children,c=0,u=s.length;c<u;c++){var l=s[c];i.push(e(l,t,r,a))}return Promise.all(i)}))}return function(t){var n=this.json,r=this.extensions,a=this.json.scenes[t],o=this,s=new i["Group"];a.name&&(s.name=o.createUniqueName(a.name)),k(s,a),a.extensions&&P(r,s,a);for(var c=a.nodes||[],u=[],l=0,h=c.length;l<h;l++)u.push(e(c[l],s,n,o));return Promise.all(u).then((function(){return s}))}}(),e}(),w=function(e){i["Loader"].call(this,e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}};w.prototype=Object.assign(Object.create(i["Loader"].prototype),{constructor:w,setDecoderPath:function(e){return this.decoderPath=e,this},setDecoderConfig:function(e){return this.decoderConfig=e,this},setWorkerLimit:function(e){return this.workerLimit=e,this},setVerbosity:function(){console.warn("THREE.DRACOLoader: The .setVerbosity() method has been removed.")},setDrawMode:function(){console.warn("THREE.DRACOLoader: The .setDrawMode() method has been removed.")},setSkipDequantization:function(){console.warn("THREE.DRACOLoader: The .setSkipDequantization() method has been removed.")},load:function(e,t,n,r){var a=new i["FileLoader"](this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,e=>{var n={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,n).then(t).catch(r)},n,r)},decodeDracoFile:function(e,t,n,r){var a={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,a).then(t)},decodeGeometry:function(e,t){for(var n in t.attributeTypes){var r=t.attributeTypes[n];void 0!==r.BYTES_PER_ELEMENT&&(t.attributeTypes[n]=r.name)}var a,o=JSON.stringify(t);if(w.taskCache.has(e)){var i=w.taskCache.get(e);if(i.key===o)return i.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var s=this.workerNextTaskID++,c=e.byteLength,u=this._getWorker(s,c).then(n=>(a=n,new Promise((n,r)=>{a._callbacks[s]={resolve:n,reject:r},a.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(e=>this._createGeometry(e.geometry));return u.catch(()=>!0).then(()=>{a&&s&&this._releaseTask(a,s)}),w.taskCache.set(e,{key:o,promise:u}),u},_createGeometry:function(e){var t=new i["BufferGeometry"];e.index&&t.setIndex(new i["BufferAttribute"](e.index.array,1));for(var n=0;n<e.attributes.length;n++){var r=e.attributes[n],a=r.name,o=r.array,s=r.itemSize;t.setAttribute(a,new i["BufferAttribute"](o,s))}return t},_loadLibrary:function(e,t){var n=new i["FileLoader"](this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((t,r)=>{n.load(e,t,void 0,r)})},preload:function(){return this._initDecoder(),this},_initDecoder:function(){if(this.decoderPending)return this.decoderPending;var e="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(t=>{var n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);var r=w.DRACOWorker.toString(),a=["/* draco decoder */",n,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending},_getWorker:function(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){var n=new Worker(this.workerSourceURL);n._callbacks={},n._taskCosts={},n._taskLoad=0,n.postMessage({type:"init",decoderConfig:this.decoderConfig}),n.onmessage=function(e){var t=e.data;switch(t.type){case"decode":n._callbacks[t.id].resolve(t);break;case"error":n._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},this.workerPool.push(n)}else this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})},_releaseTask:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]},debug:function(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))},dispose:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}),w.DRACOWorker=function(){var e,t;function n(e,t,n,o){var i,s,c=o.attributeIDs,u=o.attributeTypes,l=t.GetEncodedGeometryType(n);if(l===e.TRIANGULAR_MESH)i=new e.Mesh,s=t.DecodeBufferToMesh(n,i);else{if(l!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");i=new e.PointCloud,s=t.DecodeBufferToPointCloud(n,i)}if(!s.ok()||0===i.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+s.error_msg());var h={index:null,attributes:[]};for(var d in c){var p,f,m=self[u[d]];if(o.useUniqueIDs)f=c[d],p=t.GetAttributeByUniqueId(i,f);else{if(f=t.GetAttributeId(i,e[c[d]]),-1===f)continue;p=t.GetAttribute(i,f)}h.attributes.push(a(e,t,i,d,m,p))}return l===e.TRIANGULAR_MESH&&(h.index=r(e,t,i)),e.destroy(i),h}function r(e,t,n){var r=n.num_faces(),a=3*r,o=4*a,i=e._malloc(o);t.GetTrianglesUInt32Array(n,o,i);var s=new Uint32Array(e.HEAPF32.buffer,i,a).slice();return e._free(i),{array:s,itemSize:1}}function a(e,t,n,r,a,i){var s=i.num_components(),c=n.num_points(),u=c*s,l=u*a.BYTES_PER_ELEMENT,h=o(e,a),d=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,i,h,l,d);var p=new a(e.HEAPF32.buffer,d,u).slice();return e._free(d),{name:r,array:p,itemSize:s}}function o(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}onmessage=function(r){var a=r.data;switch(a.type){case"init":e=a.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":var o=a.buffer,i=a.taskConfig;t.then(e=>{var t=e.draco,r=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(o),o.byteLength);try{var c=n(t,r,s,i),u=c.attributes.map(e=>e.array.buffer);c.index&&u.push(c.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:c},u)}catch(l){console.error(l),self.postMessage({type:"error",id:a.id,error:l.message})}finally{t.destroy(s),t.destroy(r)}});break}}},w.taskCache=new WeakMap,w.setDecoderPath=function(){console.warn("THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.")},w.setDecoderConfig=function(){console.warn("THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.")},w.releaseDecoderModule=function(){console.warn("THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.")},w.getDecoderModule=function(){console.warn("THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.")};n("2397");var S=n("257e"),R=n("262e"),A=n("99de"),M=n("7e84"),x=n("b380");function L(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function O(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _(e,t,n){return _=O()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=Function.bind.apply(e,r),o=new a;return n&&Object(x["a"])(o,n.prototype),o},_.apply(null,arguments)}function P(e){var t="function"===typeof Map?new Map:void 0;return P=function(e){if(null===e||!L(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return _(e,arguments,Object(M["a"])(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object(x["a"])(n,e)},P(e)}n("8992");function k(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=C(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function C(e,t){if(e){if("string"===typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N(e){var t=D();return function(){var n,r=Object(M["a"])(e);if(t){var a=Object(M["a"])(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(A["a"])(this,n)}}function D(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var F="https://unpkg.com/three@0.125.2/examples/js/libs/draco/",U=(document.querySelector.bind(document),function(e){Object(R["a"])(n,e);var t=N(n);function n(){var e;return Object(g["a"])(this,n),e=t.call(this),e.renderer=null,e.scene=null,e.camera=null,e.controls=null,e.frame=-1,e.render=e.render.bind(Object(S["a"])(e)),e.onResize=e.onResize.bind(Object(S["a"])(e)),e.attributeChangedCallback=e.attributeChangedCallback.bind(Object(S["a"])(e)),e.dragging=!1,e}return Object(y["a"])(n,[{key:"autoRotate",get:function(){return this.hasAttribute("autorotate")}},{key:"isInitialized",get:function(){return Boolean(this.scene&&this.controls&&this.camera)}},{key:"onMouseDown",value:function(e){console.log("down"),e.target===this.canvas&&(this.dragging=!0)}},{key:"onMouseUp",value:function(e){this.dragging=!1}},{key:"attributeChangedCallback",value:function(e,t,n){"src"===e&&t!==n&&this.isInitialized&&(this.cleanupScene(),this.initScene()),"autorotate"===e&&this.isInitialized&&this.updateAutorotate()}},{key:"updateAutorotate",value:function(){this.isInitialized&&(this.controls.autoRotate=this.autoRotate,this.controls.update())}},{key:"connectedCallback",value:function(){this.renderer||this.setup()}},{key:"disconnectedCallback",value:function(){this.dispose()}},{key:"fov",get:function(){return parseInt(this.getAttribute("fov"),10)||45}},{key:"aspectRatio",get:function(){return this.clientWidth/this.clientWidth||1}},{key:"src",get:function(){return this.getAttribute("src")}},{key:"setup",value:function(){var e=document.createElement("canvas");e.classList.add("loading"),this.appendChild(e),this.canvas=e;var t=new i["WebGLRenderer"]({canvas:e,alpha:!0,antialias:!0});this.renderer=t,this.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio));var n=.1,r=100,a=new i["PerspectiveCamera"](this.fov,this.aspectRatio,n,r);a.position.set(0,10,20),this.camera=a;var o=new b(a,e);o.target.set(0,5,0),o.update(),this.controls=o;var s=new i["Scene"];this.scene=s,this.initScene(),this.onResize(),window.addEventListener("resize",this.onResize,!1),this.updateAutorotate(),this.frame=requestAnimationFrame(this.render)}},{key:"initScene",value:function(){this.setupLight(),this.loadModel()}},{key:"setupLight",value:function(){var e=this.scene,t=11657727,n=12155424,r=1,a=new i["HemisphereLight"](t,n,r);e.add(a);var o=16777215,s=1,c=new i["DirectionalLight"](o,s);c.position.set(5,10,2),e.add(c),e.add(c.target)}},{key:"createPlane",value:function(){var e=this.scene,t=40,n=new i["TextureLoader"],r=n.load("/textures/checker.png");r.wrapS=i["RepeatWrapping"],r.wrapT=i["RepeatWrapping"],r.magFilter=i["NearestFilter"];var a=t/2;r.repeat.set(a,a);var o=new i["PlaneBufferGeometry"](t,t),s=new i["MeshPhongMaterial"]({map:r,side:i["DoubleSide"]}),c=new i["Mesh"](o,s);c.rotation.x=-.5*Math.PI,e.add(c)}},{key:"loadModel",value:function(){var e=this,t=this.controls,n=this.scene,r=this.camera,a=this.canvas,o=new E,s=new w;s.setDecoderPath(F),o.setDRACOLoader(s),o.load(this.src,(function(o){var s=o.scene;n.add(s),e.model=s;var c=(new i["Box3"]).setFromObject(s),u=c.getSize(new i["Vector3"]).length(),l=c.getCenter(new i["Vector3"]);e.frameArea(u,u,l,r),t.maxDistance=10*u,t.target.copy(l),t.update(),a.classList.remove("loading")}))}},{key:"frameArea",value:function(e,t,n){var r=this.camera,a=.5*e,o=i["MathUtils"].degToRad(.5*r.fov),s=a/Math.tan(o),c=(new i["Vector3"]).subVectors(r.position,n).multiply(new i["Vector3"](1,2,1)).normalize();r.position.copy(c.multiplyScalar(s).add(n)),r.near=t/100,r.far=100*t,r.updateProjectionMatrix(),r.lookAt(n.x,n.y,n.z)}},{key:"cleanupScene",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===e&&(e=this.scene);var t,n=v(e.children),r=k(n);try{for(r.s();!(t=r.n()).done;){var a=t.value;a.children&&a.children.length>0&&this.cleanupScene(a);var o=a.geometry,i=a.material,s=a.texture;o&&o.dispose(),i&&i.dispose(),s&&s.dispose(),"function"===typeof a.dispose&&a.dispose(),e.remove(a)}}catch(c){r.e(c)}finally{r.f()}}},{key:"dispose",value:function(){this.cleanupScene(),window.removeEventListener("resize",this.onResize,!1),this.frame>-1&&(cancelAnimationFrame(this.frame),this.frame=-1);var e=this.renderer.getContext();this.renderer.dispose();var t=e.getExtension("WEBGL_lose_context");t&&"function"===typeof t.loseContext&&t.loseContext(),this.removeChild(this.canvas),this.renderer=null,this.scene=null,this.camera=null,this.controls=null}},{key:"onResize",value:function(){var e=this.renderer,t=this.camera;t.aspect=this.clientWidth/this.clientHeight,t.updateProjectionMatrix(),e.setSize(this.clientWidth,this.clientHeight)}},{key:"needsResize",value:function(){var e=this.canvas,t=this.devicePixelRatio;return e.width!==this.clientWidth*t||e.height!==this.clientHeight*t}},{key:"render",value:function(){var e=this.renderer,t=this.scene,n=this.camera;this.needsResize()&&this.onResize(),this.controls.update(),e.render(t,n),this.frame=requestAnimationFrame(this.render)}}],[{key:"register",value:function(){"undefined"===typeof customElements.get("gltf-modelviewer")&&customElements.define("gltf-modelviewer",n)}},{key:"observedAttributes",get:function(){return["src","autorotate"]}}]),n}(P(HTMLElement)));U.register();function j(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=H(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function H(e,t){if(e){if("string"===typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var B="https://unpkg.com/three@0.125.2/examples/js/libs/draco/",V=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.canvas,r=void 0===n?null:n,a=t.src,o=void 0===a?"":a;Object(g["a"])(this,e),this.renderer=null,this.scene=null,this.camera=null,this.controls=null,this.frame=-1,this.render=this.render.bind(this),this.dragging=!1,this.canvas=r,this.src=o}return Object(y["a"])(e,[{key:"isInitialized",get:function(){return Boolean(this.scene&&this.controls&&this.camera)}},{key:"connectedCallback",value:function(){this.renderer||this.setup()}},{key:"disconnectedCallback",value:function(){this.dispose()}},{key:"setup",value:function(){var e=this.canvas,t=new THREE.WebGLRenderer({canvas:e,alpha:!0,antialias:!0});this.renderer=t,this.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio));var n=.1,r=100,a=new THREE.PerspectiveCamera(this.fov,this.aspectRatio,n,r);a.position.set(0,10,20),this.camera=a;var o=new b(a,e);o.target.set(0,5,0),o.update(),this.controls=o;var i=new THREE.Scene;this.scene=i,this.initScene(),this.frame=requestAnimationFrame(this.render)}},{key:"initScene",value:function(){this.setupLight(),this.loadModel()}},{key:"setupLight",value:function(){var e=this.scene,t=11657727,n=12155424,r=1,a=new THREE.HemisphereLight(t,n,r);e.add(a);var o=16777215,i=1,s=new THREE.DirectionalLight(o,i);s.position.set(5,10,2),e.add(s),e.add(s.target)}},{key:"createPlane",value:function(){var e=this.scene,t=40,n=new THREE.TextureLoader,r=n.load("/textures/checker.png");r.wrapS=THREE.RepeatWrapping,r.wrapT=THREE.RepeatWrapping,r.magFilter=THREE.NearestFilter;var a=t/2;r.repeat.set(a,a);var o=new THREE.PlaneBufferGeometry(t,t),i=new THREE.MeshPhongMaterial({map:r,side:THREE.DoubleSide}),s=new THREE.Mesh(o,i);s.rotation.x=-.5*Math.PI,e.add(s)}},{key:"loadModel",value:function(){var e=this,t=this.controls,n=this.scene,r=this.camera,a=this.canvas,o=new E,i=new w;i.setDecoderPath(B),o.setDRACOLoader(i),o.load(this.src,(function(o){var i=o.scene;n.add(i),e.model=i;var s=(new THREE.Box3).setFromObject(i),c=s.getSize(new THREE.Vector3).length(),u=s.getCenter(new THREE.Vector3);e.frameArea(c,c,u,r),t.maxDistance=10*c,t.target.copy(u),t.update(),a.classList.remove("loading")}))}},{key:"frameArea",value:function(e,t,n){var r=this.camera,a=.5*e,o=THREE.MathUtils.degToRad(.5*r.fov),i=a/Math.tan(o),s=(new THREE.Vector3).subVectors(r.position,n).multiply(new THREE.Vector3(1,2,1)).normalize();r.position.copy(s.multiplyScalar(i).add(n)),r.near=t/100,r.far=100*t,r.updateProjectionMatrix(),r.lookAt(n.x,n.y,n.z)}},{key:"cleanupScene",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===e&&(e=this.scene);var t,n=v(e.children),r=j(n);try{for(r.s();!(t=r.n()).done;){var a=t.value;a.children&&a.children.length>0&&this.cleanupScene(a);var o=a.geometry,i=a.material,s=a.texture;o&&o.dispose(),i&&i.dispose(),s&&s.dispose(),"function"===typeof a.dispose&&a.dispose(),e.remove(a)}}catch(c){r.e(c)}finally{r.f()}}},{key:"dispose",value:function(){this.cleanupScene(),window.removeEventListener("resize",this.onResize,!1),this.frame>-1&&(cancelAnimationFrame(this.frame),this.frame=-1);var e=this.renderer.getContext();this.renderer.dispose();var t=e.getExtension("WEBGL_lose_context");t&&"function"===typeof t.loseContext&&t.loseContext(),this.removeChild(this.canvas),this.renderer=null,this.scene=null,this.camera=null,this.controls=null}},{key:"setSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object(l["a"])(e,2),n=t[0],r=t[1],a=void 0===r?n:r;console.log(n,a);var o=this.renderer,i=this.camera;i.aspect=n/a,o.setSize(n,a)}},{key:"render",value:function(){var e=this.renderer,t=this.scene,n=this.camera;this.controls.update(),e.render(t,n),this.frame=requestAnimationFrame(this.render)}}]),e}();function z(e,t){var n=new V({canvas:t.$refs.canvas,src:"https://terabaud.github.io/blender-experimenting/leas-donut.glb"});n.connectedCallback(),n.setSize([1024,768])}window.THREE=i;var K={data:function(){return{openDialog1:!1,resetCanvas:!1,ThreejsDemosKeys:Object.keys(r)}},mounted:function(){var e=this;this.resetCanvas=!0,setTimeout((function(){z(i,e)}),30)},methods:{switchCanvas:function(e){var t=this;t.resetCanvas=!1,t.$nextTick((function(){t.resetCanvas=!0,setTimeout((function(){r[e](i,t)}),30)}))}}},X=K,Y=(n("cd3c"),n("2877")),W=Object(Y["a"])(X,a,o,!1,null,null,null);t["default"]=W.exports},"52a7":function(e,t){t.f={}.propertyIsEnumerable},"5cc5":function(e,t,n){var r=n("2b4c")("iterator"),a=!1;try{var o=[7][r]();o["return"]=function(){a=!0},Array.from(o,(function(){throw 2}))}catch(i){}e.exports=function(e,t){if(!t&&!a)return!1;var n=!1;try{var o=[7],s=o[r]();s.next=function(){return{done:n=!0}},o[r]=function(){return s},e(o)}catch(i){}return n}},"5df3":function(e,t,n){"use strict";var r=n("02f4")(!0);n("01f9")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},"5eda":function(e,t,n){var r=n("5ca1"),a=n("8378"),o=n("79e5");e.exports=function(e,t){var n=(a.Object||{})[e]||Object[e],i={};i[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",i)}},"67ab":function(e,t,n){var r=n("ca5a")("meta"),a=n("d3f4"),o=n("69a8"),i=n("86cc").f,s=0,c=Object.isExtensible||function(){return!0},u=!n("79e5")((function(){return c(Object.preventExtensions({}))})),l=function(e){i(e,r,{value:{i:"O"+ ++s,w:{}}})},h=function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!c(e))return"F";if(!t)return"E";l(e)}return e[r].i},d=function(e,t){if(!o(e,r)){if(!c(e))return!0;if(!t)return!1;l(e)}return e[r].w},p=function(e){return u&&f.NEED&&c(e)&&!o(e,r)&&l(e),e},f=e.exports={KEY:r,NEED:!1,fastKey:h,getWeak:d,onFreeze:p}},"6b54":function(e,t,n){"use strict";n("3846");var r=n("cb7c"),a=n("0bfb"),o=n("9e1e"),i="toString",s=/./[i],c=function(e){n("2aba")(RegExp.prototype,i,e,!0)};n("79e5")((function(){return"/a/b"!=s.call({source:"a",flags:"b"})}))?c((function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?a.call(e):void 0)})):s.name!=i&&c((function(){return s.call(this)}))},"7bbc":function(e,t,n){var r=n("6821"),a=n("9093").f,o={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return a(e)}catch(t){return i.slice()}};e.exports.f=function(e){return i&&"[object Window]"==o.call(e)?s(e):a(r(e))}},"8a81":function(e,t,n){"use strict";var r=n("7726"),a=n("69a8"),o=n("9e1e"),i=n("5ca1"),s=n("2aba"),c=n("67ab").KEY,u=n("79e5"),l=n("5537"),h=n("7f20"),d=n("ca5a"),p=n("2b4c"),f=n("37c8"),m=n("3a72"),v=n("d4c0"),g=n("1169"),y=n("cb7c"),b=n("d3f4"),T=n("4bf8"),E=n("6821"),w=n("6a99"),S=n("4630"),R=n("2aeb"),A=n("7bbc"),M=n("11e9"),x=n("2621"),L=n("86cc"),O=n("0d58"),_=M.f,P=L.f,k=A.f,C=r.Symbol,I=r.JSON,N=I&&I.stringify,D="prototype",F=p("_hidden"),U=p("toPrimitive"),j={}.propertyIsEnumerable,H=l("symbol-registry"),G=l("symbols"),B=l("op-symbols"),V=Object[D],z="function"==typeof C&&!!x.f,K=r.QObject,X=!K||!K[D]||!K[D].findChild,Y=o&&u((function(){return 7!=R(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=_(V,t);r&&delete V[t],P(e,t,n),r&&e!==V&&P(V,t,r)}:P,W=function(e){var t=G[e]=R(C[D]);return t._k=e,t},q=z&&"symbol"==typeof C.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof C},Z=function(e,t,n){return e===V&&Z(B,t,n),y(e),t=w(t,!0),y(n),a(G,t)?(n.enumerable?(a(e,F)&&e[F][t]&&(e[F][t]=!1),n=R(n,{enumerable:S(0,!1)})):(a(e,F)||P(e,F,S(1,{})),e[F][t]=!0),Y(e,t,n)):P(e,t,n)},J=function(e,t){y(e);var n,r=v(t=E(t)),a=0,o=r.length;while(o>a)Z(e,n=r[a++],t[n]);return e},Q=function(e,t){return void 0===t?R(e):J(R(e),t)},$=function(e){var t=j.call(this,e=w(e,!0));return!(this===V&&a(G,e)&&!a(B,e))&&(!(t||!a(this,e)||!a(G,e)||a(this,F)&&this[F][e])||t)},ee=function(e,t){if(e=E(e),t=w(t,!0),e!==V||!a(G,t)||a(B,t)){var n=_(e,t);return!n||!a(G,t)||a(e,F)&&e[F][t]||(n.enumerable=!0),n}},te=function(e){var t,n=k(E(e)),r=[],o=0;while(n.length>o)a(G,t=n[o++])||t==F||t==c||r.push(t);return r},ne=function(e){var t,n=e===V,r=k(n?B:E(e)),o=[],i=0;while(r.length>i)!a(G,t=r[i++])||n&&!a(V,t)||o.push(G[t]);return o};z||(C=function(){if(this instanceof C)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===V&&t.call(B,n),a(this,F)&&a(this[F],e)&&(this[F][e]=!1),Y(this,e,S(1,n))};return o&&X&&Y(V,e,{configurable:!0,set:t}),W(e)},s(C[D],"toString",(function(){return this._k})),M.f=ee,L.f=Z,n("9093").f=A.f=te,n("52a7").f=$,x.f=ne,o&&!n("2d00")&&s(V,"propertyIsEnumerable",$,!0),f.f=function(e){return W(p(e))}),i(i.G+i.W+i.F*!z,{Symbol:C});for(var re="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ae=0;re.length>ae;)p(re[ae++]);for(var oe=O(p.store),ie=0;oe.length>ie;)m(oe[ie++]);i(i.S+i.F*!z,"Symbol",{for:function(e){return a(H,e+="")?H[e]:H[e]=C(e)},keyFor:function(e){if(!q(e))throw TypeError(e+" is not a symbol!");for(var t in H)if(H[t]===e)return t},useSetter:function(){X=!0},useSimple:function(){X=!1}}),i(i.S+i.F*!z,"Object",{create:Q,defineProperty:Z,defineProperties:J,getOwnPropertyDescriptor:ee,getOwnPropertyNames:te,getOwnPropertySymbols:ne});var se=u((function(){x.f(1)}));i(i.S+i.F*se,"Object",{getOwnPropertySymbols:function(e){return x.f(T(e))}}),I&&i(i.S+i.F*(!z||u((function(){var e=C();return"[null]"!=N([e])||"{}"!=N({a:e})||"{}"!=N(Object(e))}))),"JSON",{stringify:function(e){var t,n,r=[e],a=1;while(arguments.length>a)r.push(arguments[a++]);if(n=t=r[1],(b(t)||void 0!==e)&&!q(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!q(t))return t}),r[1]=t,N.apply(I,r)}}),C[D][U]||n("32e9")(C[D],U,C[D].valueOf),h(C,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},9093:function(e,t,n){var r=n("ce10"),a=n("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,a)}},9744:function(e,t,n){"use strict";var r=n("4588"),a=n("be13");e.exports=function(e){var t=String(a(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},ac4d:function(e,t,n){n("3a72")("asyncIterator")},cd3c:function(e,t,n){"use strict";n("452d")},d4c0:function(e,t,n){var r=n("0d58"),a=n("2621"),o=n("52a7");e.exports=function(e){var t=r(e),n=a.f;if(n){var i,s=n(e),c=o.f,u=0;while(s.length>u)c.call(e,i=s[u++])&&t.push(i)}return t}},f1ae:function(e,t,n){"use strict";var r=n("86cc"),a=n("4630");e.exports=function(e,t,n){t in e?r.f(e,t,a(0,n)):e[t]=n}}}]);
//# sourceMappingURL=chunk-0d2c4396.058b5fc9.js.map